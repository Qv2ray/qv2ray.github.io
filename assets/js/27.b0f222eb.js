(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{388:function(a,s,t){"use strict";t.r(s);var e=t(25),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"v2ray-核心相关-faqs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#v2ray-核心相关-faqs"}},[a._v("#")]),a._v(" V2Ray 核心相关 FAQs")]),a._v(" "),t("h2",{attrs:{id:"无法监听地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无法监听地址"}},[a._v("#")]),a._v(" 无法监听地址")]),a._v(" "),t("p",[a._v("通常是因为已经有另一个进程使用了启动 V2Ray 核心所需的端口。可能出现如下日志：")]),a._v(" "),t("ul",[t("li",[a._v("Windows:\n"),t("code",[a._v("failed to listen on address: 127.0.0.1:1088 > listen tcp 127.0.0.1:1088: Only one usage of each socket address (protocol/network address/port) is normally permitted.")])]),a._v(" "),t("li",[a._v("Linux / macOS:\n"),t("code",[a._v("failed to listen on address: 127.0.0.1:1088 > listen tcp 127.0.0.1:1088: bind: address already in use")])])]),a._v(" "),t("h3",{attrs:{id:"已存在-v2ray-核心实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#已存在-v2ray-核心实例"}},[a._v("#")]),a._v(" 已存在 V2Ray 核心实例")]),a._v(" "),t("p",[a._v("您应该首先检查系统里是否已存在一个 V2Ray 核心进程。如果 Qv2ray 在终止其操作的 V2Ray 核心前发生了崩溃，那么就有可能存在一个遗留的 V2Ray 核心进程。")]),a._v(" "),t("h4",{attrs:{id:"windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[a._v("#")]),a._v(" Windows")]),a._v(" "),t("p",[a._v("对于 Windows 用户，您可以打开您的 "),t("strong",[a._v("任务管理器")]),a._v(" 来检查是否有  "),t("code",[a._v("v2ray.exe")]),a._v(" （或是 "),t("code",[a._v("wv2ray.exe")]),a._v("，如果您选择选择了将 "),t("code",[a._v("wv2ray.exe")]),a._v(" 作为核心运行，以下同理）正在运行。")]),a._v(" "),t("p",[a._v("如果您找到了冲突的 V2Ray 核心进程，您可能需要手动终止其运行。可以按 "),t("kbd",[a._v("Win")]),a._v(" + "),t("kbd",[a._v("R")]),a._v(" 来打开 "),t("strong",[a._v("运行")]),a._v(" 窗口，然后输入以下命令并点击确定：")]),a._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("taskkill")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[a._v("/f")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[a._v("/im")]),a._v(" v2ray.exe")]),a._v("\n")])])]),t("h4",{attrs:{id:"linux-macos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-macos"}},[a._v("#")]),a._v(" Linux / macOS")]),a._v(" "),t("p",[a._v("对于 Linux / macOS 用户，您可以使用以下命令查找到 V2Ray 核心的 PID ：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" v2ray\n")])])]),t("p",[a._v("然后使用以下命令杀死进程（用查找到的 PID 替换下面的 "),t("code",[a._v("<PID>")]),a._v(" 部分）：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" -9 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("h3",{attrs:{id:"被其他程序占用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#被其他程序占用"}},[a._v("#")]),a._v(" 被其他程序占用")]),a._v(" "),t("p",[a._v("如果您没有找到运行中的 V2Ray 实例，您可能还需要再进一步排查是什么/谁占用了这个端口。")]),a._v(" "),t("h4",{attrs:{id:"windows-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-2"}},[a._v("#")]),a._v(" Windows")]),a._v(" "),t("p",[a._v("对于 Windows 用户，打开 "),t("strong",[a._v("命令提示符（cmd）")]),a._v(" 运行以下命令：")]),a._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("netstat")]),a._v(" -aon | findstr "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8888"')])]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("根据实际情况更改端口（以上为 "),t("code",[a._v("8888")]),a._v(" ）。")])]),a._v(" "),t("p",[a._v("如果有某些程序占用了端口，将获得可能像这样的输出：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("  TCP    127.0.0.1:8888            0.0.0.0            LISTENING       114514\n  TCP    [::1]:8888                [::]:0             LISTENING       114514\n")])])]),t("p",[a._v("注意输出的最后一列（在本例中为"),t("code",[a._v("114514")]),a._v("）。那就是占用了该端口的进程的 PID，运行以下命令以终止程序：")]),a._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("taskkill")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[a._v("/f")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[a._v("/pid")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("114514")])]),a._v("\n")])])]),t("p",[a._v("程序终止后，该端口应被释放并可用。")]),a._v(" "),t("h4",{attrs:{id:"linux-macos-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-macos-2"}},[a._v("#")]),a._v(" Linux / macOS")]),a._v(" "),t("p",[a._v("对于 Linux / macOS 用户，您可以使用以下命令执行类似的操作：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -nlp "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),a._v("\n")])])]),t("p",[a._v("如果有正在使用该端口的进程，则输出将类似于：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tcp6       0      0 :::8888        :::*          LISTEN      42742/evil\n")])])]),t("p",[a._v("请注意最后一列，它显示了该进程的 PID 和程序名称。可以终止它以重新获得端口。")]),a._v(" "),t("h3",{attrs:{id:"windows-系统保留端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-系统保留端口"}},[a._v("#")]),a._v(" Windows: 系统保留端口")]),a._v(" "),t("p",[a._v("该情况仅会出现在 Windows 平台上，其错误日志通常如下：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("failed to listen on address: 127.0.0.1:1088 > listen tcp 127.0.0.1:1088: bind: An attempt was made to access a socket in a way forbidden by its access permissions.")])])]),a._v(" "),t("p",[a._v("Microsoft 于 2018 年 2 月 13 日发布了 "),t("a",{attrs:{href:"https://support.microsoft.com/eu-es/help/4074588/windows-10-update-kb4074588",target:"_blank",rel:"noopener noreferrer"}},[a._v("KB4074588"),t("OutboundLink")],1),a._v(" 补丁，它将修改 Windows 操作系统上的"),t("em",[a._v("保留端口范围")]),a._v("，因此您可能会受到影响。")]),a._v(" "),t("p",[a._v("如前所述，您可以使用 "),t("code",[a._v("netsh interface ipv4 show excludedportrange protocol=tcp")]),a._v(" 命令显示所有保留端口。您不应该使用这些端口，而是将侦听端口更改为其他端口号。")]),a._v(" "),t("h3",{attrs:{id:"还是没搞定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#还是没搞定"}},[a._v("#")]),a._v(" 还是没搞定")]),a._v(" "),t("p",[a._v("只需更改监听端口就可以避免冲突，这是一种非常简单的方法。\n（译者注：在一般情况下不会遇到1~65535所有端口均被占用的情况，如遇到，请善用互联网搜索引擎或进群交流）")]),a._v(" "),t("h2",{attrs:{id:"运行失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行失败"}},[a._v("#")]),a._v(" 运行失败")]),a._v(" "),t("p",[a._v("当 V2Ray 核心无法运行时，会发生这种情况。典型的错误信息可以是：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("v2ray core failed with errcode: 255")])])]),a._v(" "),t("h3",{attrs:{id:"linux-macos-没有可执行属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-macos-没有可执行属性"}},[a._v("#")]),a._v(" Linux / macOS: 没有可执行属性")]),a._v(" "),t("p",[a._v("您可能忘记了为 "),t("code",[a._v("v2ray")]),a._v(" 和 "),t("code",[a._v("v2ctl")]),a._v(" 设置可执行属性。转到相应的目录下并执行：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x v2ray\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x v2ctl\n")])])]),t("p",[a._v("完事。")]),a._v(" "),t("h3",{attrs:{id:"罕见情况-不是有效的可执行文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#罕见情况-不是有效的可执行文件"}},[a._v("#")]),a._v(" 罕见情况: 不是有效的可执行文件")]),a._v(" "),t("p",[a._v("您可能下载了不能在您的平台上执行的二进制文件。例如，您正在运行64位 Windows （"),t("code",[a._v("amd64")]),a._v("），然后下载了 "),t("code",[a._v("arm64")]),a._v(" V2Ray 核心。或者，您下载的文件已损坏。")]),a._v(" "),t("p",[a._v("可以通过双击直接运行 "),t("code",[a._v("v2ray")]),a._v("（如果您使用的是 Windows ，则为"),t("code",[a._v("v2ray.exe")]),a._v("）快速检查。如果有错误，请删除并重新下载正确的 V2Ray 核心。")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("QvKernelABIChecker")]),a._v(" "),t("p",[a._v("自 Qv2ray 2.4.0 起， "),t("a",{attrs:{href:"https://github.com/DuckSoft",target:"_blank",rel:"noopener noreferrer"}},[a._v("@DuckSoft"),t("OutboundLink")],1),a._v(" 引入了一种全新的检查机制，称为 "),t("strong",[a._v("ABI Checker")]),a._v(" ，它将防止您使用不正确的二进制文件。因此，这种情况以后将会变得非常少见。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);