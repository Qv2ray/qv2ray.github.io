(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{406:function(a,t,e){"use strict";e.r(t);var n=e(16),r=Object(n.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"关于wayland的一些注释"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于wayland的一些注释"}},[a._v("#")]),a._v(" 关于Wayland的一些注释")]),a._v(" "),e("p",[e("strong",[a._v("注意：本节仅适用于 GNU/Linux 系统")]),a._v("。")]),a._v(" "),e("h2",{attrs:{id:"运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[a._v("#")]),a._v(" 运行")]),a._v(" "),e("p",[a._v("Qv2ray 是一个本地的 Qt5/C++ 程序，它完全支持Wayland 显示协议。 然而，要在 Wayland 协议下运行 Qv2ray ，您需要一个 Wayland 会议(例如Gnome 会议、KDE Wayland 会议、Sway 等)。 ，您也需要安装 Wayland 支持 Qt5 (通常是包名 "),e("code",[a._v("qt5-wayland")]),a._v(" or "),e("code",[a._v("(qtwayland5")]),a._v(")。")]),a._v(" "),e("p",[a._v("如果一切都已就绪，您现在可以尝试使用 Wayland 显示协议运行 Qv2ray")]),a._v(" "),e("h3",{attrs:{id:"gnome-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gnome-环境"}},[a._v("#")]),a._v(" Gnome 环境")]),a._v(" "),e("p",[a._v("Gnome环境中的Qt5程序默认使用 Xorg 协议 (Xorg) Wayland下的后退模式在Xwayland上运行。 因此，若要在 Wayland 显示协议下运行 Qv2ray ，您需要运行以下命令。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("QT_QPA_PLATFORM")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("wayland qv2ray\n")])])]),e("p",[a._v("它的工作如下：")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://imgchr.com/i/BIuwb4",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://s1.ax1x.com/2020/11/07/BIuwb4.png",alt:"Qv2ray On Wayland in Gnome Session"}}),e("OutboundLink")],1)]),a._v(" "),e("p",[a._v("You can add "),e("code",[a._v("QT_QPA_PLATFORM=wayland")]),a._v(" to Qv2ray's desktop file so that Qv2ray can use the Wayland display protocol at boot time.")]),a._v(" "),e("h3",{attrs:{id:"kde-plasma-wayland-会话"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kde-plasma-wayland-会话"}},[a._v("#")]),a._v(" KDE Plasma Wayland 会话")]),a._v(" "),e("p",[a._v("从理论上讲，它默认了Wayland显示协议，但这尚未被验证。 指定Qv2ray 以与上面相同的方式遵循Wayland显示协议。")]),a._v(" "),e("h3",{attrs:{id:"sway"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sway"}},[a._v("#")]),a._v(" Sway")]),a._v(" "),e("p",[a._v("Not tested, contributions from those with experience in using it are welcome. Specifying Qv2ray to follow the Wayland display protocol is the same as above.")]),a._v(" "),e("h2",{attrs:{id:"troubleshooting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[a._v("#")]),a._v(" Troubleshooting")]),a._v(" "),e("h3",{attrs:{id:"cannot-run-on-wayland"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cannot-run-on-wayland"}},[a._v("#")]),a._v(" Cannot run on Wayland")]),a._v(" "),e("p",[a._v("You may be using an Xorg-based desktop session, or you don't have the Wayland component for Qt installed. Or, you have statically compiled Qv2ray, but have not included the Wayland component for Qt.")]),a._v(" "),e("h3",{attrs:{id:"does-running-under-the-wayland-display-protocol-speed-up-wall-climbing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#does-running-under-the-wayland-display-protocol-speed-up-wall-climbing"}},[a._v("#")]),a._v(" Does running under the Wayland display protocol speed up wall-climbing?")]),a._v(" "),e("p",[a._v("No, thanks.")]),a._v(" "),e("h3",{attrs:{id:"kde-wayland会议下的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kde-wayland会议下的问题"}},[a._v("#")]),a._v(" KDE Wayland会议下的问题")]),a._v(" "),e("p",[a._v("在 KDE Wayland 会话下，如果您注销并重新登录，Qv2ray 将不会退出， 不会显示通知托盘图标，将使用大量的 CPU 。")]),a._v(" "),e("p",[e("strong",[a._v("解决方案是(以下三个选项任选一个)：")])]),a._v(" "),e("ol",[e("li",[e("p",[a._v("使用 Gnome Wayland 会话")])]),a._v(" "),e("li",[e("p",[a._v("使用 KDE Plasma 或其他桌面“s Xorg 会话")])]),a._v(" "),e("li",[e("p",[a._v("杀死你自己的 Qv2ray 进程，然后再打开它。")])])]),a._v(" "),e("blockquote",[e("p",[a._v("相关问题： "),e("a",{attrs:{href:"https://github.com/Qv2ray/Qv2ray/issues/830",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/Qv2ray/Qv2ray/issues/830"),e("OutboundLink")],1)])]),a._v(" "),e("h3",{attrs:{id:"no-tray-icon-under-gnome"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#no-tray-icon-under-gnome"}},[a._v("#")]),a._v(" No tray icon under Gnome")]),a._v(" "),e("p",[a._v("The Gnome desktop does not support tray icons by nature. Ubuntu has made an "),e("a",{attrs:{href:"https://extensions.gnome.org/extension/1301/ubuntu-appindicators/",target:"_blank",rel:"noopener noreferrer"}},[a._v("extension"),e("OutboundLink")],1),a._v(" to support a Gnome tray extension based on DBus communication. The result of testing so far is that the extension will display trays from Qv2ray running on Wayland under Arch Linux, but may not display them under the custom Ubuntu Wayland session. This is an upstream issue and cannot be addressed by this project.")]),a._v(" "),e("h3",{attrs:{id:"where-is-the-application-window"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#where-is-the-application-window"}},[a._v("#")]),a._v(" Where is the application window?")]),a._v(" "),e("p",[a._v("As described above, GNOME does not support tray icons, so does Wayland's reference compositor "),e("code",[a._v("weston")]),a._v(". With current version, the application main window will be hidden after launch if "),e("strong",[e("em",[a._v("Auto Connect")])]),a._v(" is enabled.(see "),e("a",{attrs:{href:"https://github.com/Qv2ray/Qv2ray/issues/1080",target:"_blank",rel:"noopener noreferrer"}},[a._v("#1080"),e("OutboundLink")],1),a._v(" "),e("a",{attrs:{href:"https://github.com/Qv2ray/Qv2ray/issues/1080",target:"_blank",rel:"noopener noreferrer"}},[a._v("#1097"),e("OutboundLink")],1),a._v("). A current workaround is to launch Qv2ray again, then the main window will be activated and become visible.")]),a._v(" "),e("h2",{attrs:{id:"clipboard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clipboard"}},[a._v("#")]),a._v(" Clipboard")]),a._v(" "),e("p",[a._v("Since Wayland does not have a unified clipboard interface, it may not be possible to use the right-click menu to copy and paste between applications running in Wayland. As a workaround, you can use "),e("code",[a._v("Ctrl + C/V")]),a._v(" to copy and paste. Also note that when copying and pasting, open both the copy source window and the paste target window at the same time.")]),a._v(" "),e("p",[a._v("Translated with www.DeepL.com/Translator (free version)")])])}),[],!1,null,null,null);t.default=r.exports}}]);