(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{385:function(e,a,t){"use strict";t.r(a);var s=t(16),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"v2ray-core-related-faqs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#v2ray-core-related-faqs"}},[e._v("#")]),e._v(" V2Ray Core Related FAQs")]),e._v(" "),t("h2",{attrs:{id:"cannot-listen-on-address"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cannot-listen-on-address"}},[e._v("#")]),e._v(" Cannot Listen on Address")]),e._v(" "),t("p",[e._v("Usually it's because there's already another process using the port required to start V2Ray core. The logs can be like:")]),e._v(" "),t("ul",[t("li",[e._v("Windows: "),t("code",[e._v("failed to listen on address: 127.0.0.1:1088 > listen tcp 127.0.0.1:1088: Only one usage of each socket address (protocol/network address/port) is normally permitted.")])]),e._v(" "),t("li",[e._v("Linux / macOS: "),t("code",[e._v("failed to listen on address: 127.0.0.1:1088 > listen tcp 127.0.0.1:1088: bind: address already in use")])])]),e._v(" "),t("h3",{attrs:{id:"existing-v2ray-core-instance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#existing-v2ray-core-instance"}},[e._v("#")]),e._v(" Existing V2Ray Core Instance")]),e._v(" "),t("p",[e._v("You should always first check if there's an existing V2Ray process. A remaining V2Ray process can be there if Qv2ray happened to crash before it could terminate its V2Ray core.")]),e._v(" "),t("h4",{attrs:{id:"windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[e._v("#")]),e._v(" Windows")]),e._v(" "),t("p",[e._v("For Windows users, you can open your "),t("strong",[e._v("Task Manager")]),e._v(" to check if there's "),t("code",[e._v("v2ray.exe")]),e._v(" (or "),t("code",[e._v("wv2ray.exe")]),e._v(", if you chose to run "),t("code",[e._v("wv2ray.exe")]),e._v(" as core, the same applies below) running.")]),e._v(" "),t("p",[e._v("If you find one, you may want to terminate that process manually. Windows users can hit "),t("kbd",[e._v("Win")]),e._v(" + "),t("kbd",[e._v("R")]),e._v(" to invoke the "),t("strong",[e._v("Run")]),e._v(" window, then type the following command and run:")]),e._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("taskkill")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("/f")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("/im")]),e._v(" v2ray.exe")]),e._v("\n")])])]),t("h4",{attrs:{id:"linux-macos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-macos"}},[e._v("#")]),e._v(" Linux / macOS")]),e._v(" "),t("p",[e._v("For Linux / macOS users, you may first use this command to find PID of V2Ray core:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v(" aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" v2ray\n")])])]),t("p",[e._v("and then kill the process with:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("kill")]),e._v(" -9 "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("h3",{attrs:{id:"taken-by-other-programs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#taken-by-other-programs"}},[e._v("#")]),e._v(" Taken by Other Programs")]),e._v(" "),t("p",[e._v("If you don't see a running V2Ray instance, you may want to dive deeper to investigate that who is using your ports.")]),e._v(" "),t("h4",{attrs:{id:"windows-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-2"}},[e._v("#")]),e._v(" Windows")]),e._v(" "),t("p",[e._v("For Windows users, you may open "),t("strong",[e._v("Command Prompt")]),e._v(" and run the following command:")]),e._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("netstat")]),e._v(" -aon | findstr "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"8888"')])]),e._v("\n")])])]),t("p",[e._v("Change the port ("),t("code",[e._v("8888")]),e._v(" in the above) according to your real situation. You will get an output if there is some program using your port, which may usually look like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("  TCP    127.0.0.1:8888            0.0.0.0            LISTENING       114514\n  TCP    [::1]:8888                [::]:0             LISTENING       114514\n")])])]),t("p",[e._v("Notice the last column of the output (in this case, "),t("code",[e._v("114514")]),e._v("). That is the very PID of the process that is using your port. Run the following command to terminate the program:")]),e._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("taskkill")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("/f")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("/pid")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("114514")])]),e._v("\n")])])]),t("p",[e._v("After the program is terminated, the port should be released and usable.")]),e._v(" "),t("h4",{attrs:{id:"linux-macos-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-macos-2"}},[e._v("#")]),e._v(" Linux / macOS")]),e._v(" "),t("p",[e._v("For Linux / macOS users, you can use the folowing command to do the similar thing:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Linux")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("netstat")]),e._v(" -nlp "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8888")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Linux / macOS")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("lsof")]),e._v(" -i:8888\n")])])]),t("p",[e._v("If there's a process that is using the port, the output will be like:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# netstat\ntcp6       0      0 :::8888        :::*          LISTEN      42742/evil\n\n# lsof\nevil   42742 username   11u  IPv6  29087      0t0  TCP *:8888 (LISTEN)\n")])])]),t("p",[e._v("Notice the fields "),t("code",[e._v("42742")]),e._v(" and "),t("code",[e._v("evil")]),e._v(", which shows the PID and program name of the very process. Feel free to terminate and regain the port.")]),e._v(" "),t("h3",{attrs:{id:"windows-reserved-by-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-reserved-by-system"}},[e._v("#")]),e._v(" Windows: Reserved by System")]),e._v(" "),t("p",[e._v("This happens only on Windows, whose error log usually looks like this: "),t("code",[e._v("failed to listen on address: 127.0.0.1:1088 > listen tcp 127.0.0.1:1088: bind: An attempt was made to access a socket in a way forbidden by its access permissions.")])]),e._v(" "),t("p",[e._v("Microsoft launched "),t("a",{attrs:{href:"https://support.microsoft.com/eu-es/help/4074588/windows-10-update-kb4074588",target:"_blank",rel:"noopener noreferrer"}},[e._v("KB4074588"),t("OutboundLink")],1),e._v(" patch on February 13th in 2018, which will modify the "),t("em",[e._v("reserved port range")]),e._v(" on Windows operating system, so you may be affected.")]),e._v(" "),t("p",[e._v("As is stated, you can use "),t("code",[e._v("netsh interface ipv4 show excludedportrange protocol=tcp")]),e._v(" command to show the reserved ports. If a port is reserved, you should avoid that port and just change the listening port to another one.")]),e._v(" "),t("h3",{attrs:{id:"if-no-way-out"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if-no-way-out"}},[e._v("#")]),e._v(" If No Way Out")]),e._v(" "),t("p",[e._v("Just change the listening port and avoid the clash. That's a pretty straightforward way.")]),e._v(" "),t("h2",{attrs:{id:"failed-to-execute"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#failed-to-execute"}},[e._v("#")]),e._v(" Failed to Execute")]),e._v(" "),t("p",[e._v("This happens when V2Ray core cannot be executed. The typical error message can be:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("v2ray core failed with errcode: 255")])])]),e._v(" "),t("h3",{attrs:{id:"linux-macos-no-executable-attribute"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-macos-no-executable-attribute"}},[e._v("#")]),e._v(" Linux / macOS: No Executable Attribute")]),e._v(" "),t("p",[e._v("You may have forgotten to set the exectuable attribute for "),t("code",[e._v("v2ray")]),e._v(" and "),t("code",[e._v("v2ctl")]),e._v(". Go to the corresponding directory and execute:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x v2ray\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x v2ctl\n")])])]),t("p",[e._v("You're done.")]),e._v(" "),t("h3",{attrs:{id:"rare-not-a-valid-executable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rare-not-a-valid-executable"}},[e._v("#")]),e._v(" Rare: Not a Valid Executable")]),e._v(" "),t("p",[e._v("You may have downloaded a binary that is not executable on your platform. For example, you are running Windows 64bit ("),t("code",[e._v("amd64")]),e._v(") and then downloaded an "),t("code",[e._v("arm64")]),e._v(" V2Ray core; Or, the file you downloaded is corrupted.")]),e._v(" "),t("p",[e._v("To have a quick check, you can run the "),t("code",[e._v("v2ray")]),e._v(" (or "),t("code",[e._v("v2ray.exe")]),e._v(" if you are using Windows) directly by clicking on it. If there's an error, just delete and redownload the correct file.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("QvKernelABIChecker")]),e._v(" "),t("p",[e._v("Since Qv2ray 2.4.0, "),t("a",{attrs:{href:"https://github.com/DuckSoft",target:"_blank",rel:"noopener noreferrer"}},[e._v("@DuckSoft"),t("OutboundLink")],1),e._v(' introduced a novel checking mechanism called "ABI Checker", that will prevent you from using incorrect binaries. Therefore, this case have become rather rare afterwards.')])])])}),[],!1,null,null,null);a.default=r.exports}}]);